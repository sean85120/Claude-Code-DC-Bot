services:
  bot:
    build: .
    env_file: .env
    environment:
      - DATA_DIR=/data
    volumes:
      # Persistent data (daily summaries, templates, schedules, queued sessions, recovery)
      # Note: this directory is writable by the bot. Ensure host permissions match the container user.
      - bot-data:/data
      # Project configuration (read-only)
      - ./projects.json:/app/projects.json:ro
      # Claude CLI session (read-only — must match the container user's home)
      - ~/.claude:/home/botuser/.claude:ro
      # Mount your project directories here — add one line per project in projects.json
      # Example:
      # - /home/user/projects/my-app:/home/user/projects/my-app
    restart: unless-stopped
    stop_grace_period: 10s

volumes:
  bot-data:
